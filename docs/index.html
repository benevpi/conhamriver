
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Is there poo in the river?</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-u2DjYv3X35mnG3OmOQpyaD4G1ygEfLTTs+kN2fP0h+c=" crossorigin="">
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-oM9Y9PykPH/3L7XQHzAXnxEvx6hE1Jzm1v9ZBysuG1w=" crossorigin=""></script>
    <script src="https://cdn.counter.dev/script.js" data-id="99522e23-c138-4047-babb-1e1503dd4a6f" data-utcoffset="1"></script>
</head>
<body class="theme-ocean">
    <h1>Is there poo in the river?</h1>
    
    <div class="generated-time">Report generated: 2025-07-17 09:37:24. If if has rained since then, the data may be inaccurate</div>
</br>
<div class="generated-time">The risk is based entirely on the author's personal risk tolerance. River swimming is never 100% safe, so it's up to you to make an informed decision </div>
</br>
<div class="generated-time">This system is currently being tested and may produce unexpected or inaccurate results, but it's trying it's hardest</div>


    <table>
        <caption>Swim sites and current risk</caption>
        <tr>
            <th>Site</th>
            <th>Risk Level</th>
            <th>Details</th>
        </tr>
<tr>
        <td>Avon at Conham River</td>
        <td class="risk-medium">Medium </td>
        <td><a href="conham.html">View report</a></td>
    </tr>
    <tr>
        <td>Avon at Salford</td>
        <td class="risk-medium">Medium </td>
        <td><a href="salford.html">View report</a></td>
    </tr>
    <tr>
        <td>Avon at Warleigh Weir</td>
        <td class="risk-low">Low </td>
        <td><a href="warleigh.html">View report</a></td>
    </tr>
    <tr>
        <td>River Chew at Publow</td>
        <td class="risk-medium">Medium </td>
        <td><a href="chew.html">View report</a></td>
    </tr>
    
    </table>
    <div id="map" style="height: 400px; margin-top: 1em;"></div>
    <div style="margin-top:1.5em;font-size:0.95em;color:#444;">
        Reports are based on storm overflow data and automated "upstream" calculations for each site. See detailed reports for logic and disclaimers.
    </div>

    <script>
        const siteData = [{"site":"Avon at Conham River","filename":"conham.html","risk":"Medium","warnings":[],"lat":51.444858,"lon":-2.534812},{"site":"Avon at Salford","filename":"salford.html","risk":"Medium","warnings":[],"lat":51.444858,"lon":-2.534812},{"site":"Avon at Warleigh Weir","filename":"warleigh.html","risk":"Low","warnings":[],"lat":51.444858,"lon":-2.534812},{"site":"River Chew at Publow","filename":"chew.html","risk":"Medium","warnings":[],"lat":51.415847,"lon":-2.497921}];
        const map = L.map('map').setView([51.44, -2.53], 10);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: 'Â© OpenStreetMap'
        }).addTo(map);

        const icons = {
            High: L.icon({
                iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png',
                shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',
                iconSize: [25, 41],
                iconAnchor: [12, 41],
                popupAnchor: [1, -34],
                shadowSize: [41, 41]
            }),
            Medium: L.icon({
                iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-orange.png',
                shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',
                iconSize: [25, 41],
                iconAnchor: [12, 41],
                popupAnchor: [1, -34],
                shadowSize: [41, 41]
            }),
            Low: L.icon({
                iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-green.png',
                shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',
                iconSize: [25, 41],
                iconAnchor: [12, 41],
                popupAnchor: [1, -34],
                shadowSize: [41, 41]
            })
        };

        siteData.forEach(site => {
            const icon = icons[site.risk] || icons.Low;
            L.marker([site.lat, site.lon], { icon })
                .addTo(map)
                .bindPopup(`<a href="${site.filename}">${site.site}</a>`);
        });
    </script>
</body>
</html>
